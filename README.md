# petter
RSS配信可能なコンテンツ（新着情報等）を簡単に作成できるCMS

********************************************************************************


【目次】

■1. 【PETTER（ペッター）とは】

■2. 【インストール】
　　●1.PETTERをサーバーにアップ
　　●2.ユーザー名、パスワードを入力
　　●3.管理内容を入力

■3. 【PETTERをHTMLファイルに組み込み、管理内容を表示】
　　●1.管理内容のIDを確認
　　●2.PETTERを組み込むHTMLファイルをPHPに変換
　　●3.HTMLファイルの先頭にPETTERのコードを書き込む
　　●4.xmlの宣言文がある時には変更
　　●5.管理内容を表示させたい箇所にPETTERのコードを書き込む
　　●6.RSS配信のリンクにPETTERのコードを書き込む

■4. 【管理画面での管理内容操作】
　　●1.管理内容のPETTER組み込みページにおける表示設定変更
　　●2.管理内容新規作成
　　●3.管理内容削除

■5. 【管理画面での管理内容の記事操作】
　　●1.記事の一覧表示
　　●2.記事の作成
　　●3.記事の編集
　　●4.記事の削除


********************************************************************************


■1. 【PETTER（ペッター）とは】

RSS配信可能なCMSです。
簡単な情報を気軽に表示させたい場所へ【ペタっと張り付ける】
このコンセプトから命名しました。

既存のHTMLファイルをPHPファイルにしてPETTERを組み込みます。
表示する項目は

・NEWマーク
・タイトル
・本文
・時間

のみです。
機能を限定していることにより、組み込みの簡単さと使いやすさを重要視しています。


********************************************************************************


■2. 【インストール】

●1.PETTERをサーバーにアップ
[petter]フォルダをサーバーにアップします。
その中にあるindex.phpにアクセスします。

例）
http://www.odenge.jp/　の直下に【petter】フォルダをアップした時

http://www.odenge.jp/petter/index.php にアクセスします。


●2.ユーザー名、パスワードを入力
初期設定は

ユーザー名：odenge
パスワード：koike

です。

ユーザー名とパスワードを変更したい時には
[petter]フォルダ直下のset_up.php

[petter]
　|
　|__set_up.php　3行目と6行目にある下記の部分

define("PETTER_USER_NAME", "odenge");

define("PETTER_PASSWORD", "koike");

これを任意の値にします。
※【PHPファイルの保存形式は UTF-8N にしてください。UTF-8のBOM無しです。】

例）
ユーザー名：taiyodo
パスワード：petter
このように変更したい時には

define("PETTER_USER_NAME", "taiyodo");

define("PETTER_PASSWORD", "petter");

以上のようにします。


●3.管理内容を入力
PETTERを使って管理する内容を入力します。

例）
新着情報のページに組み込む時には【新着情報】
お知らせ一覧を表示させているページ等には【お知らせ】

管理内容を入力したら、入力項目の下にある「PETTER」ボタンを押してください。

インストールは以上です。

なお自動的に管理内容の記事が1件作成されます。


********************************************************************************


■3. 【PETTERをHTMLファイルに組み込み、管理内容を表示】

●1.管理内容のIDを確認
PETTERの管理画面で【管理内容一覧】の画面から
チェックボックスの右側に、管理内容の項目がリンクになっているので
表示させたい管理内容をクリックします。

管理内容の記事一覧が表示されます。
クリックした管理内容のタイトルが表示されている右側に

【ID　数字】となっています。インストール直後の状態では数字は1になっています。

この数字がIDです。


●2.PETTERを組み込むHTMLファイルをPHPに変換
PETTERを組み込みたいファイルの拡張子をphpにします。
petter.htmlの時にはpetter.phpとします。
このファイルを【UTF-8】で保存しなおしてください。


●3.HTMLファイルの先頭にPETTERのコードを書き込む
petter.phpを開き
ファイルの先頭に

<?php
define("PETTER_PATH", "petter");
require_once(PETTER_PATH."/function.php");
?>

上記のPHPコードを書き込み、下記の設定変更を行ってください。

【設定変更】
□1. define("PETTER_PATH", "petter");
この"petter"の部分はこのPHPファイルからインストールした[petter]フォルダへのパスにしてください。

例）1つ上の階層に[petter]フォルダがある時
define("PETTER_PATH", "../petter");
※【petterの後ろにスラッシュは入れないでください。　"../petter/"　とするとエラーになります。】


●4.xmlの宣言文がある時には変更
<?xml version="1.0" encoding="UTF-8"?>

上記のようなxmlの宣言がある時には、その分を下記のPHPコードで囲み
<?php echo ''; ?>
以下のようにする。

<?php echo '<?xml version="1.0" encoding="UTF-8"?>'; ?>


●5.管理内容を表示させたい箇所にPETTERのコードを書き込む
<?php petter(PETTER_PATH, 管理内容ID); ?>

【設定変更】
□1.管理内容ID
例）管理内容の記事一覧でIDが1の時
<?php petter(PETTER_PATH, 1); ?>

このコードを表示させたい箇所に書いてください。


●6.RSS配信のリンクにPETTERのコードを書き込む
RSS配信をしない場合にはこのコードを書き込む必要はありません。
もし配信する時には、このRSS配信のためのPETTERコードを書き込む前に、
PETTER管理画面で管理内容一覧からRSS配信する管理内容のチェックボックスをチェックして、
設定変更ボタンを押します。
そしてから、表示ページURLにPETTERを組み込むページのURLを入力してください。
相対パスではなく、
http://www.google.co.jp/
のようにhttpやhttpsから始まるURLを入力してください。


URLの入力が完了したらPETTER組み込みページにおいて
<?php petter_rss(PETTER_PATH, 管理内容ID); ?>

【設定変更】
□1.管理内容ID
例）管理内容の記事一覧でIDが1の時
<?php petter_rss(PETTER_PATH, 1); ?>

このコードをRSS配信のリンクのhref属性に書いてください。

例）
<a href="<?php petter_rss(PETTER_PATH, 1); ?>"><img src="images/rss.gif" alt="RSS" /></a>


以上でHTMLファイルへのPETTERの組み込みは完了です。


********************************************************************************


■4. 【管理画面での管理内容操作】

●1.管理内容のPETTER組み込みページにおける表示設定変更
管理内容一覧画面から設定を変更したい管理内容のチェックボックスをチェックして、設定変更ボタンを押します。
変更する内容を入力して更新ボタンを押してください。

【設定変更】
□1. デザインテンプレートの設定
PETTER組み込みページには管理内容の記事がテーブルで表示されます。
管理画面で選択できるデザインテンプレートは
[petter]フォルダ内の[design]フォルダに含まれるPHPファイルです。
新しいデザインテンプレートを追加したいときには
このdesignフォルダにPHPファイルをアップロードしてください。

[petter]
　|
　|__[design]
　　　|
　　　|__1.php
　　　|__2.php
　　　|__3.php

□2. 表示ページURLの設定
相対パスではなく、
http://www.google.co.jp/
のようにhttpやhttpsから始まるURLを入力してください。


●2.管理内容新規作成
管理内容一覧画面から作成ボタンを押してください。
新規管理内容を入力して作成ボタンを押してください。
なお自動的に管理内容の記事が1件作成されます。


●3.管理内容削除
管理内容一覧画面から削除したい管理内容のチェックボックスをチェックして、削除ボタンを押します。
複数の管理内容を同時に削除できます。


********************************************************************************


■5. 【管理画面での管理内容の記事操作】
●1.記事の一覧表示
記事一覧画面では10件ずつ投稿日時の新しい順に上から表示されます。
次の10件についてはページリンクが表示されます。
何件ずつ表示させるかという、表示件数の設定変更は[petter]フォルダの中にあるset_up.php

[petter]
　|
　|__set_up.php　9行目にある下記の部分

define("PAGE_ARTICLE_NUMBER", 10);

この10の数字を、表示させたい件数の数字に変更してください。


●2.記事の作成
記事一覧画面から作成ボタンを押してください。
記事の内容を入力して作成ボタンを押してください。
未来の日付の投稿も可能です。


●3.記事の編集
記事一覧画面から編集したい記事のタイトルのリンクをクリックしてください。
内容を編集して編集ボタンを押してください。


●4.記事の削除
記事一覧画面から編集したい記事のチェックボックスをチェックして、削除ボタンを押してください。
複数の記事を同時に削除できます。


********************************************************************************


【変更履歴】

　2011/5/16
・管理内容の設定で、表示ページURLに空白除去を付け加えました。
・1つのウェブサイト内に複数のPETTERをインストールしても、ログインが正常に動作するようにしました。

　2011/5/13
・記事の時間指定で2038年以上の時間を登録すると起きるエラーを解消しました。
　有効なタイムスタンプの範囲を考慮しました。
・RSSの記事表示で「<」が記事に含まれるとRSSの内容が表示されないエラーを解消しました。
　「<」の後に半角スペースが入るようにしました。
　ただし<a>タグは正常に機能します。
・PETTERをどこの階層にでもインストールできるようにしました。

　2011/5/10
・1つのウェブページに、複数のPETTERの管理内容を表示できるようにしました。
　階層が違うウェブページでも複数の管理内容を表示できます。

　2011/4/26
・PETTERが完成しました。


********************************************************************************

